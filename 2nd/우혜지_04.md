# Chapter04 역할, 책임, 협력

- 중요한 것은 개별 객체가 아니라 **객체들 사이에 이뤄지는 협력**이다.
- 어떤 협력에 참여하는지가 객체에 필요한 행동을 결정하고, 필요한 행동이 객체의 상태를 결정한다.

<br>

## 협력

- 협력은 한 사람이 다른 사람에게 도움을 **요청**할 때 시작된다.
- 요청을 받은 사람은 요청한 사람에게 필요한 지식이나 서비스를 제공하는 것으로 요청에 **응답**한다.
- 협력은 다수의 연쇄적인 **요청**과 **응답**의 흐름으로 구성된다.
- 등장인물이 특정한 요청을 받아들일 수 있는 이유는 그 요청에 대해 적절한 방식으로 응답하는 데 필요한 지식과 행동 방식을 가지고 있기 때문이다.

<br>

## 책임

- 객체지향 개발에서 가장 중요한 능력은 책임을 능숙하게 소프트웨어 객체에 할당하는 것이다.
- 객체의 책임은 ‘객체가 무엇을 알고 있는가(knowing)’와 ‘무엇을 할 수 있는가(doing)’로 구성된다.

**[객체의 책임]**

- 하는 것(doing)
    - 객체를 생성하거나 계산을 하는 등 스스로 하는 것
    - 다른 객체의 행동을 시작하는 것
    - 다른 객체의 활동을 제어하고 조절하는 것
- 아는 것(knowing)
    - 개인적인 정보에 관해 아는 것
    - 관련된 객체에 관해 아는 것
    - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것

- 책임은 객체의 외부에 제공해 줄 수 있는 정보와 외부에 제공해 줄 수 있는 서비스의 목록이다.

### 책임과 메시지

- **메시지 전송(message-send)** : 객체가 다른 객체에게 주어진 책임을 수행하도록 요청을 보내는 것
- **송신자** : 메시지를 전송함으로써 협력을 요청하는 객체
- **수신자** : 메시지를 받아 요청을 처리하는 객체
- 메시지는 협력에 참여하는 두 객체 사이의 관계를 강조한 것이다.
- 하나의 책임이 여러 메시지로 분할되는 것이 일반적이다.

<br>

## 역할

- 어떤 객체가 수행하는 **책임의 집합**은 객체가 협력 안에서 수행하는 **역할**을 암시한다.
- 역할은 재사용 가능하고 유연한 객체지향 설계를 낳는 매우 중요한 구성요소이다.
- 역할은 협력 내에서 다른 객체로 대체할 수 있음을 나타내는 일종의 표식이다.
- 역할은 객체지향 설계의 **단순성(simplicity)**, **유연성(flexibility)**, **재사용성(reusability)** 을 뒷받침하는 핵심 개념이다.
- **협력의 추상화**는 협력의 개수를 줄이는 동시에 구체적인 객체를 추상적인 역할로 대체한다.
- 객체가 역할을 대체하기 위해서는 협력 안에서 **역할이 수행하는 모든 책임을 동일하게 수행**할 수 있어야 한다.
- 역할의 대체 가능성 → 행위 호환성 → 동일한 책임의 수행

<br>

## 객체의 모양을 결정하는 협력

- 데이터는 단지 객체가 행위를 수행하는 데 필요한 재료일 뿐이다.
- 객체는 **행위를 수행하며 협력에 참여하기 위해** 존재한다.
- 협력을 설계한다는 것은 설계에 참여하는 객체들이 주고받을 요청과 응답의 흐름을 결정한다는 것을 의미한다.
- 협력을 구성하는 데 필요한 일련의 책임을 먼저 고안한 후, 책임을 수행하는 데 필요한 객체를 선택한다.
- 행동이 결정된 후 각 객체가 필요로 하는 데이터를 정의할 수 있고, 데이터와 행동이 결정된 후 각각을 구현하는 클래스를 개발할 수 있다.

<br>

## 객체지향 설계 기법

### 책임-주도 설계(Responsibility-Driven Design)

- 협력에 필요한 책임들을 식별하고 적합한 객체에게 책임을 할당하는 방식
- 기능은 더 작은 규모의 책임으로 분할되고 각 책임은 적절한 객체에 할당된다.
- 객체는 자신의 책임 외의 것에 대해 적절한 객체를 찾아 필요한 작업을 요청한다.
- 결과적으로 요청과 응답을 통한 객체들 간의 협력 관계가 구성된다.

### 디자인 패턴(Design Pattern)

- 책임-주도 설계의 결과로, 반복적으로 사용하는 문제해결을 위한 설계 템플릿(역할, 책임, 협력)의 모음
- 특정 상황과 문제에 공통으로 사용할 수 있기 때문에 역할과 책임, 협력 관계를 빠르고 손쉽게 포착할 수 있다.

### 테스트-주도 개발(Test-Driven Development)

- 테스트를 먼저 작성하고 테스트를 통과하는 구체적인 코드를 작성하는 방식
- 객체의 역할이 메시지를 수신할 때 어떤 결과를 반환하고 어떤 협력을 하는지에 대한 기대를 코드의 형태로 작성한다.
- 객체지향에 대한 깊이 있는 지식과 책임-주도 설계의 원칙에 대한 종합적인 이해가 요구되는 개발 방식이다.
